<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bingo</title>
    <link rel="stylesheet" href="css/styleBingo.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  </head>
  <body id="contentToConvert">
    <h1>Bingo Challenge</h1>
    <p>
      U ovoj igri potrebno je skupiti 5 potpisa zaredom.
      Pronađite osobe koje vole/žele ili imaju neke od ovih stvari, natjerajete
      ih da se potpišu i pobijedite u ovoj igri. Sretno!
    </p>

    <table>
      <tr>
        <td>Putovao je van zemlje</td>
        <td>Letio je avionom</td>
        <td>Ima više od troje braće i sestara</td>
        <td>Ima pet ili više kućnih ljubimaca</td>
        <td>Voli jesti kiesele krastavce</td>
      </tr>
      <tr>
        <td>Igra košarku</td>
        <td>Voli Disney-eve crtane filmove</td>
        <td>Voli crtati</td>
        <td>Voli HTML</td>
        <td>Zna roniti</td>
      </tr>
      <tr>
        <td>Omiljena boja je narančasta</td>
        <td>Ne voli plažu</td>
        <td><strong>SLOBODAN PROSTOR</strong></td>
        <td>Dobar je u matematici</td>
        <td>Nema kućne ljubimce</td>
      </tr>
      <tr>
        <td>Ne voli čokoladu</td>
        <td>Boji se pauka</td>
        <td>Voli peći kolačiće</td>
        <td>Svira instrument</td>
        <td>Alergičan je na mačke ili pse</td>
      </tr>
      <tr>
        <td>Slavi rođendan u oktobru</td>
        <td>Voli jesti sir</td>
        <td>Igra online igre</td>
        <td>Ne voli pizzu</td>
        <td>Voli pjevati</td>
      </tr>
    </table>
    <p>Skupi 5 potpisa zaredom - BINGO!</p>
    <p>Svaka osoba može staviti inicijale na vaš papir samo dva puta.</p>
    <button onclick="generatePDF();">Preuzmi kao PDF</button>
    <button onclick="openEmailModal();">Pošalji mailom</button>
    <button onclick="parent.zatvoriFrame()" style="background-color: red;">Izlaz</button>

    <div id="emailModal" class="email-modal">
      <div class="email-modal-content">
        <h3>Pošalji mailom</h3>
        <input type="email" id="emailInput" placeholder="Unesite email adresu..." />
        <div class="email-modal-buttons">
          <button onclick="sendEmail();" class="email-send-btn">Pošalji</button>
          <button onclick="closeEmailModal();" class="email-cancel-btn">Poništi</button>
        </div>
      </div>
    </div>

    <script>
    function generatePDF() {
       const element = document.getElementById('contentToConvert');
       const options = {
       margin: 1,
       filename: 'Bingo.pdf',
       image: { type: 'jpeg', quality: 0.98 },
       html2canvas: { scale: 2 },
       jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
       };
       html2pdf().set(options).from(element).save();
    }

    function openEmailModal() {
       document.getElementById('emailModal').style.display = 'block';
       document.getElementById('emailInput').value = '';
    }

    function closeEmailModal() {
       document.getElementById('emailModal').style.display = 'none';
    }

    function sendEmail() {
       const email = document.getElementById('emailInput').value.trim();
       if (email === '' || !email.includes('@')) {
          alert('Molimo unesite validnu email adresu!');
          return;
       }
       
       const subject = 'Bingo Challenge - Student Fun Zone';
       const body = 'Pogledajte moj Bingo Challenge!\n\nU ovoj igri potrebno je skupiti 5 potpisa zaredom.';
       
       window.location.href = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
       closeEmailModal();
    }

    window.onclick = function(event) {
       const modal = document.getElementById('emailModal');
       if (event.target === modal) {
          closeEmailModal();
       }
    }
    </script>
  </body>
</html>
